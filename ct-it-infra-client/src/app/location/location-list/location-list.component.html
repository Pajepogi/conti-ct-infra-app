<div class="location-container">
    <div class="list-heading">
        Location List
    </div>

    <div class="table-container mat-elevation-z8" >
        <div class="section">
            <div class="left-section">
                <div class="search">
                    <form>
                    <input type="text" class="inp-txt" placeholder="Search Location" (keyup)="applyFilter($event)" #input>
                    <mat-icon matSuffix>search</mat-icon>
                    </form>
                </div>

                <select class="select-btn" (change)="selectAction($event)">
                    <option value="action" selected>Action</option>
                    <option value="showAll" *ngIf="action != 'showAll'">Show All</option>
                    <option value="action" *ngIf="action == 'showAll'">Show Less</option>
                    <!--<option value="pdf">Download PDF</option>
                    <option value="xls">Download XLS</option>
                    <option value="settings">Settings</option> -->
                </select>

            </div>
            <div class="right-section">
                <button class="new-location" [disabled]="disableCreateButton" (click)="addNewLocation()">+ New Location</button>
            </div>
        </div>
        <!-- <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar> -->

        <mat-table #table [dataSource]="dataSource">

            <!-- Action Column -->
            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef> Action </th>
                <td mat-cell *matCellDef="let element" class="action-link" [ngClass]="element.isActive == false ? 'greyedOut' : ''">

                    <!-- <img src="assets/images/edit.png"> -->
                    <img src="assets/images/edit.png" (click)="editLocation(element)" style="cursor: pointer;" *ngIf="element.isActive == true" alt="edit" title="Edit location">
                    <img src="assets/images/delete.png" style="margin-left: 5px;cursor: pointer;" data-bs-toggle="modal" data-bs-target="#staticBackdrop" (click)="deleteLocation(element)" *ngIf="element.isActive == true" alt="delete" title="Discard location">
                    <span class="material-icons retired" *ngIf="element.isActive == false" (click)="viewLocation(element)" alt="view" title="view location">visibility</span>

                    <!-- <img src="assets/images/delete.png" style="padding-left: 8px;"  style="cursor: pointer;margin-left: 5px;" (click)="deleteLocation(element)"> -->

                </td>
            </ng-container>

            <ng-container matColumnDef="isActive" hidden>
                <mat-header-cell *matHeaderCellDef hidden> Status</mat-header-cell>
                <mat-cell *matCellDef="let element" hidden> {{element.isActive}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="locationCode">
                <mat-header-cell *matHeaderCellDef> Location Code</mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.loc_Code}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="locationName">
                <mat-header-cell *matHeaderCellDef> Location Name </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.location_Name}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="ladpDomain">
                <mat-header-cell *matHeaderCellDef> LDAP Domain </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.ldap_Domain}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="ladpContainer">
                <mat-header-cell *matHeaderCellDef> LDAP Container </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.ldap_Container}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="region">
                <mat-header-cell *matHeaderCellDef> Region </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.region.name}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="country">
                <mat-header-cell *matHeaderCellDef> Country </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.country}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="architecDiagram">
                <mat-header-cell *matHeaderCellDef> Architecture Diagram </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''">
                    {{element.architecture_Diagram}}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="cuNum">
                <mat-header-cell *matHeaderCellDef> CU Number </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.cU_Number}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="ccNum">
                <mat-header-cell *matHeaderCellDef> CC Number </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.cC_Number}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="timezone">
                <mat-header-cell *matHeaderCellDef> Timezone </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.timezone}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="bmcGrp">
                <mat-header-cell *matHeaderCellDef> BMC Group </mat-header-cell>
                <mat-cell *matCellDef="let element" [ngClass]="element.isActive == false ? 'greyedOut' : ''"> {{element.bmC_Group}} </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>

        <mat-paginator class="customPaginator" [length]="totalRows" [pageIndex]="currentPage" [pageSize]="pageSize"
            [pageSizeOptions]="pageSizeOptions" showFirstLastButtons (page)="pageChanged($event)"
            >
        </mat-paginator>

    </div>
</div>


<div class="col d-flex align-items-center justify-content-center">
    <img src="../../../assets/images/loading1.png" alt="" class="loader" *ngIf="isLoading">

  </div>


  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
         <div class="modal-title fs-5 m-auto" id="staticBackdropLabel">
             <!-- <img src="../../../assets/images/icon-exclamation.png" alt="" class=" mt-5 popupImage"> -->
             <svg xmlns="http://www.w3.org/2000/svg" width="112" height="112" fill="#FEA500" class="bi bi-exclamation-circle mt-4 popupImage" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
              </svg>
          </div>
        <div class="modal-body m-auto">
          <p class="popupSubHeadingText">Are you sure?</p>
          <p class="popupBodyTextMsg">This Location would be retired</p>
        </div>
        <div class="m-auto pb-5">
          <button type="button" class="btn popupCancelButton" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn popupConfirmButton" data-bs-dismiss="modal" (click)="popupConfirmButton()">Confirm</button>
        </div>
      </div>
    </div>
  </div>

